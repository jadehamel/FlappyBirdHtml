<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flappy Bird</title>
<style>
    canvas {
        border: 2px solid black;
        display: block;
        margin: 0 auto;
    }
</style>
</head>
<body>
<canvas id="gameCanvas" width="1000" height="650"></canvas>
<script>
	var scoreInit = 0;
	var frameInit = 0;
	var gravity = 2;
	var jumpForce = -45;
	var radius = 20;
	var sizeX = 50;
	var pipeWidth = 65;
	var pipeYDivider = 2;
	var scoreTextLeft = 50;
	var scoreTextTop = 50;
	var notifTextFont = '48px Arial';
	var noticeTextFill = 'black';
	var jumpKey = 'Space';
	var avatarColor = 'yellow';
	var pipeColor = 'pink';
	var gameOverText = 'Game Over';
	var scoreText = 'Score: ';
	var refreshText = 'Press F5 to restart';
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const bird = {
        x: sizeX,
        y: canvas.height / pipeYDivider,
        radius: radius,
        gravity: gravity,
        jumpForce: jumpForce,
        draw: function() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fillStyle = avatarColor;
            ctx.fill();
            ctx.closePath();
        },
        update: function() {
            this.y += this.gravity;
        },
        jump: function() {
            this.y += this.jumpForce;
        },
        collisionCheck: function() {
            if (this.y - this.radius < 0 || this.y + this.radius > canvas.height) {
                return true;
            }
            return false;
        }
    };

    let pipes = [];
    let score = scoreInit;
    let gameOver = false;

    function Pipe() {
        this.x = canvas.width;
        this.y = Math.random() * (canvas.height - 400) + 200;
        this.width = pipeWidth;
        this.draw = function() {
            ctx.fillStyle = pipeColor;
            ctx.fillRect(this.x, 0, this.width, this.y);
            ctx.fillRect(this.x, this.y + 150, this.width, canvas.height - (this.y + 100));
        };
        this.update = function() {
            this.x -= 2;
        };
    }

    document.addEventListener('keydown', event => {
        if (event.code === jumpKey) {
            bird.jump();
        }
    });

    function gameLoop() {
        if (!gameOver) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            bird.update();
            bird.draw();
            pipes.forEach(pipe => {
                pipe.update();
                pipe.draw();
                if (bird.x + bird.radius > pipe.x && bird.x - bird.radius < pipe.x + pipe.width &&
                    (bird.y - bird.radius < pipe.y || bird.y + bird.radius > pipe.y + 150)) {
                    gameOver = true;
                }
                if (pipe.x + pipe.width < 0) {
                    score++;
                    pipes.shift();
                }
            });
            if (bird.collisionCheck()) {
                gameOver = true;
            }
            if (frame % 150 === 0) {
                pipes.push(new Pipe());
            }
            ctx.fillStyle = noticeTextFill;
            ctx.font = notifTextFont;
            ctx.fillText(scoreText + score, scoreTextLeft, scoreTextLeft);
            frame++;
            requestAnimationFrame(gameLoop);
        } else {
            ctx.fillStyle = noticeTextFill;
            ctx.font = notifTextFont;
            ctx.fillText(scoreText + score, canvas.width / 2 - 100, canvas.height / 2);
            ctx.fillText(gameOverText, canvas.width / 2 - 150, canvas.height / 2 + 50);
            ctx.fillText(refreshText, canvas.width / 2 - 200, canvas.height / 2 + 100);
        }
    }

    let frame = frameInit;
    gameLoop();
</script>
</body>
</html>
